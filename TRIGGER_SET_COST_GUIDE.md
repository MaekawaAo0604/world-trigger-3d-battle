# 🎯 トリガーセットコスト機能ガイド

## 📊 概要

**トリガーセット時にトリオンコストを支払う新機能**により、戦略的な装備選択が重要になりました。

### 🎯 主な変更点
- **セットコスト**: 各トリガーに装備時のコスト追加
- **最大トリオン減少**: セットコストは最大トリオンから差し引かれる
- **戦略的選択**: 全スロットを埋めることが必ずしも最適ではない

---

## 💰 セットコスト一覧

### ⚔️ アタッカートリガー
| トリガー | セットコスト | 理由 |
|---------|------------|------|
| 弧月 | 12 | 標準的なアタッカー武器 |
| レイガスト | 15 | 高性能（攻守両用） |

### 🎯 シュータートリガー
| トリガー | セットコスト | 理由 |
|---------|------------|------|
| アステロイド | 8 | 基本シューター弾 |
| メテオラ | 14 | 爆発弾のため高コスト |
| バイパー | 18 | 複雑な軌道制御のため超高コスト |
| ハウンド | 12 | 追尾機能のため中コスト |

### 🎯 スナイパートリガー
| トリガー | セットコスト | 理由 |
|---------|------------|------|
| アイビス | 20 | 超高性能のため最高コスト |
| ライトニング | 14 | 高性能狙撃銃 |
| イーグレット | 16 | 射程特化のため高コスト |

### 🔫 ガンナートリガー
| トリガー | セットコスト | 理由 |
|---------|------------|------|
| アステロイド銃 | 6 | 連射武器のため低コスト |
| サラマンダー | 10 | 爆発弾のため中コスト |

### 🛡️ 防御・補助トリガー
| トリガー | セットコスト | 理由 |
|---------|------------|------|
| シールド | 5 | 基本防御のため低コスト |
| バッグワーム | 4 | 隠密補助のため最低コスト |
| グラスホッパー | 7 | 移動補助のため低コスト |
| スパイダー | 8 | 補助トリガーのため低コスト |

---

## 🎮 使用方法

### 1. **トリガーセット編集**
```
トリガーメニューを開く → セットコスト表示確認 → 装備変更
```

### 2. **コスト表示**
- **緑色 ✓ 装備可能**: セットコストが最大トリオン以下
- **赤色 ✗ トリオン不足**: セットコストが最大トリオンを超過

### 3. **装備変更時の処理**
1. 前のセットのコストを最大トリオンに返還
2. 新しいセットのコストをチェック
3. 装備可能な場合、新セットのコストを最大トリオンから差し引き
4. 現在トリオンが新しい最大値を超える場合は調整

---

## 🧠 戦略的な装備選択

### 📈 **高トリオンキャラクター（雨取千佳: 380）**
**戦略**: 全スロット高性能装備
```
装備例:
- スロット1: アイビス (20)
- スロット2: ライトニング (14)  
- スロット3: バイパー (18)
- スロット4: メテオラ (14)
- C1: レイガスト (15)
- C2: サラマンダー (10)
- C3: グラスホッパー (7)
- C4: スパイダー (8)

総コスト: 106
残り最大トリオン: 274
```

### ⚖️ **標準トリオンキャラクター（空閑遊真: 70）**
**戦略**: 主力特化＋補助バランス
```
装備例:
- スロット1: 弧月 (12)
- スロット2: アステロイド銃 (6)
- スロット3: ライトニング (14)
- スロット4: 未装備
- C1: シールド (5)
- C2: バッグワーム (4)
- C3: 未装備
- C4: 未装備

総コスト: 41
残り最大トリオン: 29
```

### 🎯 **低トリオンキャラクター（一般隊員: 50）**
**戦略**: 必要最小限の特化装備
```
装備例:
- スロット1: 弧月 (12)
- スロット2: アステロイド銃 (6)
- スロット3: 未装備
- スロット4: 未装備
- C1: シールド (5)
- C2: バッグワーム (4)
- C3: 未装備
- C4: 未装備

総コスト: 27
残り最大トリオン: 23
```

---

## 💡 戦略的含意

### ✅ **利点**
1. **戦略的深さ**: トリガー選択に重要な意味が生まれる
2. **キャラクター差別化**: トリオン量の違いが戦術に直結
3. **選択と集中**: 全スロット埋めることが最適解ではない
4. **リソース管理**: 限られたトリオンの有効活用が重要

### 🎯 **最適化のコツ**
- **高コストトリガー**: アイビス、バイパーは慎重に選択
- **補助トリガー活用**: シールド、バッグワームで生存力向上
- **空きスロット戦略**: 無理に埋めずにトリオンを温存
- **役割特化**: アタッカー、スナイパーなど明確な役割分担

### 📊 **バランス調整**
- **低コスト**: 基本装備（アステロイド銃、シールドなど）
- **中コスト**: 特殊機能（ハウンド、サラマンダーなど） 
- **高コスト**: 高性能装備（アイビス、バイパーなど）

---

## 🔧 技術実装

### 主要な新機能
1. **TriggerDefinitions.setCost**: 各トリガーのセットコスト定義
2. **Trigger.getTriggerSetCost()**: セット総コスト計算
3. **Trigger.canAffordTriggerSet()**: 装備可能性チェック
4. **Trigger.consumeSetCost()**: セットコスト消費処理
5. **TriggerMenu.updateCostDisplay()**: UIでのコスト表示

### 処理フロー
```
トリガーセット変更
    ↓
前セットコスト返還
    ↓
新セットコスト計算
    ↓
装備可能性チェック
    ↓
新セットコスト消費
    ↓
UI更新
```

---

## 🧪 テスト

### 基本テスト
```typescript
import { runTriggerSetCostValidation } from './tests/TriggerSetCostTest';

// コスト機能の検証
runTriggerSetCostValidation();
```

### 動作確認項目
- [ ] セットコストが正しく計算される
- [ ] 最大トリオンから適切に差し引かれる
- [ ] コスト超過時に装備が拒否される
- [ ] UI でコスト情報が正しく表示される
- [ ] セット変更時にコストが適切に更新される

---

## 🎉 まとめ

**トリガーセットコスト機能**により、World Trigger 3D Battleはより戦略的で深みのあるゲームプレイを提供します。

### 🎯 **プレイヤーへの影響**
- **選択の重要性**: どのトリガーを装備するかが戦術に直結
- **キャラ特性活用**: トリオン量の違いが明確な差別化要因
- **戦略の多様性**: 同じキャラでも装備選択で異なる戦術が可能

### 🚀 **今後の拡張可能性**
- **トリオン効率化スキル**: 特定条件でセットコスト軽減
- **装備セット効果**: 特定組み合わせでボーナス
- **動的コスト変動**: 戦闘状況に応じたコスト変化

---

**原作の戦略性を忠実に再現した、より深いゲーム体験をお楽しみください！** 🎮✨